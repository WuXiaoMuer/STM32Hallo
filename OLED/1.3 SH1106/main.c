#include "stm32f10x.h"
#include "sh1107_i2c.h"
#include "stm32f10x_it.h"

int main(void)
{
	static char bus[1024]={
		0X00,0X00,0X80,0X80,0X80,0X80,0X80,0X80,0XE0,0XF8,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,
		0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,
		0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XFC,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,
		0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF0,0XF0,0XC0,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0XFE,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0XFF,
		0XFF,0XFF,0XFF,0XC0,0XC0,0XC0,0XEC,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,
		0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X03,0X03,0X03,0X03,0XFF,0XFF,
		0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XE0,0XE0,0XC0,0X00,0X00,0X00,
		0X00,0X00,0X01,0X03,0X03,0X03,0X03,0X03,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0XFF,
		0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X01,0XFF,
		0XFF,0XFF,0XFF,0XFF,0X07,0X07,0X07,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XF0,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0XFF,
		0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XF0,0XF0,0XF0,0XF0,
		0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XF0,0XFF,
		0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XF8,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0XFF,
		0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,
		0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X01,
		0X00,0XF0,0XF8,0XF8,0XFC,0XFC,0XFC,0XF8,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0XFF,
		0XFF,0XFF,0XFF,0X3F,0X3F,0X3F,0X7F,0XFF,0XFF,0XFF,0XFF,0XFF,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XF8,0XFF,
		0XFF,0XFF,0XFF,0XFF,0XFE,0XFE,0XFF,0XFF,0XFF,0XFF,0X7F,0X7F,0X3F,0X0F,0X00,0X00,
		0X00,0X07,0X0F,0X1F,0X1F,0X1F,0X1F,0X1F,0X7F,0XFF,0XFF,0XFF,0XFF,0XF8,0XF0,0XFF,
		0XFF,0XFF,0XFF,0XF0,0XF0,0XF0,0XF0,0XFF,0XFF,0XFF,0XFF,0XFF,0XF0,0XF0,0XF0,0XF0,
		0XF0,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XFC,0XFC,0XFC,0XFC,0XFF,0XFF,
		0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X3F,0X0F,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XC0,0XE1,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,
		0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,
		0XE3,0XE3,0XE3,0XE3,0XE3,0XE3,0XE1,0XE1,0XE1,0XE1,0XE1,0XE1,0XE1,0XE1,0XE1,0XE1,
		0XE1,0XE1,0XE1,0XE1,0XE1,0XE1,0XE0,0XC0,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XC3,
		0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X83,0XFF,
		0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XC3,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X03,0X83,
		0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X3F,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X07,0X0F,0X1F,0X3F,0X7F,0X7F,0XFF,0XFF,
		0XFE,0XFC,0XF8,0XF8,0XF8,0XF8,0XF0,0XF0,0XF0,0XF8,0XF8,0XF8,0XF8,0XFC,0XFF,0XFF,
		0XFF,0X7F,0X3F,0X1F,0X1F,0X3F,0X3F,0X7E,0X7E,0X7E,0X7C,0X7C,0X7C,0X7E,0X7E,0X7F,
		0X7F,0X7F,0X3F,0X3F,0X1F,0X1F,0X07,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X80,0XC0,0XC0,0XE0,0XE0,0XE0,0XF0,
		0XF0,0XF1,0XF9,0XF9,0XF9,0XF9,0XF9,0XF9,0XF9,0XF9,0XF9,0XF9,0XF9,0XF9,0XF8,0XF8,
		0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,
		0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0X70,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFE,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0X07,
		0X03,0X03,0X01,0X01,0X01,0X01,0X01,0X01,0X01,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X03,0X0F,0X0F,0X1F,0X3F,0X3F,0X7F,0X7F,0XFE,
		0XFE,0XFC,0XFC,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,
		0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,
		0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0X70,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XC0,0XF0,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,
		0XF8,0XF8,0X38,0X38,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X80,0XC0,
		0XE0,0XE0,0XF0,0XF0,0XF0,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF8,0XF0,
		0XF0,0XF0,0XE0,0XE0,0XC0,0XC0,0X80,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XDF,0X03,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0XF0,0XFE,0XFF,0XFF,0XFF,
		0XFF,0XFF,0XFF,0XFF,0X7F,0X0F,0X03,0X01,0X01,0X01,0X00,0X01,0X01,0X01,0X01,0X03,
		0X8F,0XFF,0XFF,0XFF,0XFF,0XFF,0XFF,0XFE,0XFC,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
		0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X03,0X07,0X0F,0X1F,0X3F,0X3F,0X3F,0X7F,0X7F,
		0X7E,0XFC,0XFC,0XFC,0XFC,0XF8,0XFC,0XFC,0XFC,0XFE,0XFF,0X7F,0X7F,0X7F,0X3F,0X3F,
		0X1F,0X0F,0X07,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X00,0X70,0X78,0X7C,
		0X7F,0X7F,0X7F,0X7F,0X7F,0X7F,0X3F,0X0F,0X07,0X00,0X00,0X00,0X00,0X00,0X00,0X00,
	};

	sh1107_i2c_initialization();     //初始化
	
	sh1107_write_one_byte_command(0xae);      //关闭
	sh1107_write_two_bytes_command(0x81, 0x88);    //设置电流
	sh1107_write_one_byte_command(0xaf);      //开启


	sh1107_write_display_data(32,0,64,16,&bus[0]);    //写入数据，图像尺寸64*128

}
