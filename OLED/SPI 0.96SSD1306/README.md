# STM32 单色 OLED 驱动库（SSD1306）

> 💡 轻量级、易移植的 STM32 OLED 驱动，支持 I²C/SPI 接口，适用于 128×64 / 128×32 分辨率的 SSD1306 屏幕。 

## ✨ 特性

- ✅ 支持 **SSD1306**（或其他兼容）驱动芯片
- ✅ 支持 **128×64** 和 **128×32** 两种常见分辨率（可配置）
- ✅ 支持 **I²C** 和 **SPI** 通信方式（通过宏定义切换）
- ✅ 内置 **ASCII 字符显示**（6×8、8×16 两种字体）
- ✅ 提供基础图形功能：点、线、矩形、清屏、反显等
- ✅ 使用 **显存缓冲区（GRAM）**，支持局部刷新或全屏刷新
- ✅ 模块化设计：`oled.h` 声明接口，`oled.c` 实现逻辑，`oledfont.h` 存放字模
- ✅ 适用于 STM32F1/F4/H7 等系列（依赖 HAL 或标准库，底层接口可自定义）

## 📁 文件说明

|              |                                                              |
| ------------ | ------------------------------------------------------------ |
| `oled.h`     | 驱动头文件：包含配置宏、函数声明、寄存器定义                 |
| `oled.c`     | 驱动主实现：初始化、命令/数据发送、图形绘制、刷新控制        |
| `oledfont.h` | 字模数据文件：包含 6×8 和 8×16 ASCII 字符点阵（通常为 128 个字符） |

## ⚙️ 使用步骤

### 1. 硬件连接（以 I²C 为例）

|      |                |
| ---- | -------------- |
| VCC  | 3.3V           |
| GND  | GND            |
| SCL  | I2C1_SCL (PB6) |
| SDA  | I2C1_SDA (PB7) |

> ⚠️ 注意：I²C 地址通常为 `0x78`（写）或 `0x7A`，可在 `oled.h` 中修改 `OLED_I2C_ADDR`。 

### 2. 配置通信方式

在 `oled.h` 中启用对应接口：

\#define OLED_I2C    // 使用 I²C（默认）

// #define OLED_SPI // 使用 SPI（需自行实现底层函数）

### 3. 实现底层接口（以 HAL 库为例）

在 `oled.c` 中找到如下函数并实现：

void OLED_I2C_WriteByte(uint8_t data, uint8_t type);

// type: 0 = command, 1 = data

// 通常调用 HAL_I2C_Mem_Write() 或直接发送 1 字节命令/数据

### 4. 初始化与显示

在 `main.c` 中使用：

OLED_Init();                 // 初始化 OLED

OLED_Clear();                // 清屏

OLED_ShowString(0, 0, "Hello", 16);  // 在 (0,0) 显示 16 号字体

OLED_Refresh();              // 刷新显存到屏幕（若未自动刷新）

## 🖼️ 常用 API

|                                        |                                |
| -------------------------------------- | ------------------------------ |
| `OLED_Init()`                          | 初始化 OLED 屏幕               |
| `OLED_Clear()`                         | 清空显存（黑色）               |
| `OLED_Refresh()`                       | 将显存内容刷到 OLED（全屏）    |
| `OLED_ShowChar(x, y, ch, size)`        | 显示单个字符（size: 12 或 16） |
| `OLED_ShowString(x, y, str, size)`     | 显示字符串                     |
| `OLED_DrawPoint(x, y)`                 | 画点                           |
| `OLED_DrawBMP(x, y, width, height, p)` | 显示自定义位图                 |

> 所有绘图操作均作用于 **内部 1024 字节显存**（128×64/8），需调用 `OLED_Refresh()` 才能显示。 

## 📌 注意事项

- 显存格式：**每页 128 字节，共 8 页（64 行）**，垂直地址模式
- 字体仅支持 **ASCII 0~127**（`oledfont.h` 中定义），如需汉字需自行扩展
- 若使用 SPI 模式，需额外定义 **DC、RST、CS** 引脚并实现 `OLED_SPI_WriteByte`
- I²C 速率建议 ≥ 400 kHz 以保证刷新流畅性

## 📦 依赖

- STM32 HAL 库 或 标准外设库（仅用于 I²C/SPI 底层）
- 已正确初始化 I²C 或 SPI 外设

## 📄 许可证

GPL 3.0

## 🎯 典型应用场景

- 嵌入式调试信息显示
- 传感器数据显示（温度、湿度等）
- 简易人机界面（菜单、状态指示）
- 学习 STM32 外设驱动开发

> 💡 **提示**：此库结构清晰、资源占用小，非常适合资源受限的 Cortex-M0/M3/M4 项目。 